<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ASRC Atmospheric Chemistry Data Processing • atmoschem.process</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="ASRC Atmospheric Chemistry Data Processing">
<meta property="og:description" content="Functions, configuration files, and scripts for creating the ASRC's
    cleaned and processed atmospheric chemistry datasets. Tools to visualize the
    data and generate reports are also included.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">atmoschem.process</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.5.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/sop.html">Data Manager Standard Operating Procedures</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ASRCsoft/atmoschem.process/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="asrc-atmospheric-chemistry-data-processing" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#asrc-atmospheric-chemistry-data-processing" class="anchor"></a>ASRC Atmospheric Chemistry Data Processing</h1></div>

<p><img src="reference/figures/whiteface-station.jpg" width="400px" align="right" style="padding:0px 10px 10px 10px;"></p>
<p>The <code>atmoschem.process</code> R package processes atmospheric chemistry data from ASRC sites in New York State. It provides tools to generate reports and processed datasets from the ASRC’s atmospheric chemistry data, and tools to visualize the data.</p>
<div id="table-of-contents" class="section level2">
<h2 class="hasAnchor">
<a href="#table-of-contents" class="anchor"></a>Table of contents</h2>
<ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#installation">Installation</a></li>
<li><a href="#reproducing-the-routine-chemistry-dataset">Reproducing the routine chemistry dataset</a></li>
<li><a href="#citation">Citation</a></li>
<li><a href="#license">License</a></li>
<li><a href="#references">References</a></li>
</ul>
</div>
<div id="overview" class="section level2">
<h2 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h2>
<p>The atmospheric chemistry group at the ASRC, run by Dr. Jim Schwab, collects data from instruments at 4 sites across the state of New York: Whiteface Mountain (summit and base), Pinnacle State Park, and Queens College. We maintain a variety of instruments measuring ozone and ozone precursors, airborne particulate matter, sulfur dioxide, and meteorology.</p>
<p>The data undergoes a variety of adjustments and quality assurance checks before being released to the public, where it is used by government agencies and atmospheric science researchers, among others. Users can access the datasets online via our website at <a href="http://atmoschem.asrc.cestm.albany.edu/" class="uri">http://atmoschem.asrc.cestm.albany.edu/</a>.</p>
<p>This software, which generates the processed datasets, synthesizes advice from atmospheric monitoring, statistical programming, and data management. In terms of data processing, we tend to follow guidelines from NARSTO (Christensen et al. <a href="#ref-christensen_narsto_2000">2000</a>), and we also work regularly with EPA standards. The code is organized as an R package (Marwick, Boettiger, and Mullen <a href="#ref-marwick_packaging_2018">2018</a>), and we use GitHub for project management (Bryan <a href="#ref-bryan_excuse_2018">2018</a>). For data management, we tend to follow Briney (<a href="#ref-briney_data_2015">2015</a>), and we try to make the data convenient to use (White et al. <a href="#ref-white_nine_2013">2013</a>).</p>
<p>The data collection at Whiteface Mountain is described in detail in a series of publications (Schwab, Wolfe, et al. <a href="#ref-schwab_atmospheric_2016">2016</a>; Brandt et al. <a href="#ref-brandt_atmospheric_2016">2016</a>; Schwab, Casson, et al. <a href="#ref-schwab_atmospheric_2016-1">2016</a>), and another paper describes the measurements at Pinnacle State Park (Schwab, Spicer, and Demerjian <a href="#ref-schwab_ozone_2009">2009</a>).</p>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>To install the package, run (from within R)</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">'remotes'</span><span class="op">)</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span><span class="op">(</span><span class="st">'ASRCsoft/atmoschem.process'</span><span class="op">)</span></code></pre></div>
<p>To generate the processed dataset, additional dependencies are requried:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span><span class="op">(</span><span class="st">'ASRCsoft/atmoschem.process'</span>, dependencies <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
</div>
<div id="reproducing-the-routine-chemistry-dataset" class="section level2">
<h2 class="hasAnchor">
<a href="#reproducing-the-routine-chemistry-dataset" class="anchor"></a>Reproducing the routine chemistry dataset</h2>
<div id="requirements" class="section level3">
<h3 class="hasAnchor">
<a href="#requirements" class="anchor"></a>Requirements</h3>
<ul>
<li>Linux</li>
<li>R and R package dependencies</li>
<li>PostgreSQL, and a user with permission to create and delete databases</li>
</ul>
<p>The processing is currently very computationally intensive and requires about 8GB of RAM and 30GB of disk space.</p>
</div>
<div id="creating-the-dataset" class="section level3">
<h3 class="hasAnchor">
<a href="#creating-the-dataset" class="anchor"></a>Creating the dataset</h3>
<p>Download or clone the repository. The dataset package can be generated by running (from a terminal)</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1"></a><span class="bu">cd</span> path/to/atmoschem.process</span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="fu">make</span> routine_dataset</span></code></pre></div>
<p>You will be asked for the atmoschem server’s data password (twice), which can be obtained from <a href="http://atmoschem.asrc.cestm.albany.edu/">the atmoschem website</a>.</p>
</div>
<div id="viewing-the-data" class="section level3">
<h3 class="hasAnchor">
<a href="#viewing-the-data" class="anchor"></a>Viewing the data</h3>
<p>The R package comes with a Shiny app for viewing the processing steps. After data has been processed, it can be opened from within R:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ASRCsoft/atmoschem.process">atmoschem.process</a></span><span class="op">)</span>
<span class="co"># Create a postgres database connection and atmoschem.process dataset object</span>
<span class="va">dbcon</span> <span class="op">=</span> <span class="fu">src_postgres</span><span class="op">(</span>dbname <span class="op">=</span> <span class="st">'nysatmoschemdb'</span>, user <span class="op">=</span> <span class="st">'user'</span><span class="op">)</span>
<span class="va">nysac</span> <span class="op">=</span> <span class="fu">etl</span><span class="op">(</span><span class="st">'atmoschem.process'</span>, db <span class="op">=</span> <span class="va">dbcon</span>, dir <span class="op">=</span> <span class="st">'data'</span><span class="op">)</span>
<span class="co"># Open the Shiny app</span>
<span class="fu">view_processing</span><span class="op">(</span><span class="va">nysac</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div id="citation" class="section level2">
<h2 class="hasAnchor">
<a href="#citation" class="anchor"></a>Citation</h2>
<p>The package citation can be obtained by running <code><a href="https://rdrr.io/r/utils/citation.html">citation('atmoschem.process')</a></code>:</p>
<pre><code>
To cite package 'atmoschem.process' in publications use:

  William May (2020). atmoschem.process: ASRC Atmospheric Chemistry Data Processing. R
  package version 0.5.0. https://github.com/ASRCsoft/atmoschem.process

A BibTeX entry for LaTeX users is

  @Manual{,
    title = {atmoschem.process: ASRC Atmospheric Chemistry Data Processing},
    author = {William May},
    year = {2020},
    note = {R package version 0.5.0},
    url = {https://github.com/ASRCsoft/atmoschem.process},
  }</code></pre>
</div>
<div id="license" class="section level2">
<h2 class="hasAnchor">
<a href="#license" class="anchor"></a>License</h2>
<p><code>atmoschem.process</code> is released under the open source MIT license.</p>
</div>
<div id="references" class="section level2">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<div id="refs" class="references hanging-indent">
<div id="ref-brandt_atmospheric_2016">
<p>Brandt, Richard E., James J. Schwab, Paul W. Casson, Utpal K. Roychowdhury, Douglas Wolfe, Kenneth L. Demerjian, Kevin L. Civerolo, Oliver V. Rattigan, and H. Dirk Felton. 2016. “Atmospheric Chemistry Measurements at Whiteface Mountain, NY: Ozone and Reactive Trace Gases.” <em>Aerosol and Air Quality Research</em> 16 (3): 873–84. <a href="https://doi.org/10.4209/aaqr.2015.05.0376" class="uri">https://doi.org/10.4209/aaqr.2015.05.0376</a>.</p>
</div>
<div id="ref-briney_data_2015">
<p>Briney, Kristin. 2015. <em>Data Management for Researchers: Organize, Maintain and Share Your Data for Research Success</em>. Pelagic Publishing Ltd.</p>
</div>
<div id="ref-bryan_excuse_2018">
<p>Bryan, Jennifer. 2018. “Excuse Me, Do You Have a Moment to Talk About Version Control?” <em>The American Statistician</em> 72 (1): 20–27. <a href="https://doi.org/10.1080/00031305.2017.1399928" class="uri">https://doi.org/10.1080/00031305.2017.1399928</a>.</p>
</div>
<div id="ref-christensen_narsto_2000">
<p>Christensen, Sigurd W., Thomas A. Boden, Les A. Hook, and Meng-Dawn Cheng. 2000. “NARSTO Data Management Handbook.” NARSTO Quality Systems Science Center. <a href="https://web.archive.org/web/20030401082229/http://cdiac.esd.ornl.gov:80/programs/NARSTO/pdf/dmhb_current_version.PDF" class="uri">https://web.archive.org/web/20030401082229/http://cdiac.esd.ornl.gov:80/programs/NARSTO/pdf/dmhb_current_version.PDF</a>.</p>
</div>
<div id="ref-marwick_packaging_2018">
<p>Marwick, Ben, Carl Boettiger, and Lincoln Mullen. 2018. “Packaging Data Analytical Work Reproducibly Using R (and Friends).” <em>The American Statistician</em> 72 (1): 80–88. <a href="https://doi.org/10.1080/00031305.2017.1375986" class="uri">https://doi.org/10.1080/00031305.2017.1375986</a>.</p>
</div>
<div id="ref-schwab_atmospheric_2016-1">
<p>Schwab, James J., Paul Casson, Richard Brandt, Liquat Husain, Vincent Dutkewicz, Douglas Wolfe, Kenneth L. Demerjian, et al. 2016. “Atmospheric Chemistry Measurements at Whiteface Mountain, NY: Cloud Water Chemistry, Precipitation Chemistry, and Particulate Matter.” <em>Aerosol and Air Quality Research</em> 16 (3): 841–54. <a href="https://doi.org/10.4209/aaqr.2015.05.0344" class="uri">https://doi.org/10.4209/aaqr.2015.05.0344</a>.</p>
</div>
<div id="ref-schwab_ozone_2009">
<p>Schwab, James J., John B. Spicer, and Kenneth L. Demerjian. 2009. “Ozone, Trace Gas, and Particulate Matter Measurements at a Rural Site in Southwestern New York State: 1995–2005.” <em>Journal of the Air &amp; Waste Management Association</em> 59 (3): 293–309. <a href="https://doi.org/10.3155/1047-3289.59.3.293" class="uri">https://doi.org/10.3155/1047-3289.59.3.293</a>.</p>
</div>
<div id="ref-schwab_atmospheric_2016">
<p>Schwab, James J., Douglas Wolfe, Paul Casson, Richard Brandt, Kenneth L. Demerjian, Liquat Husain, Vincent A. Dutkiewicz, Kevin L. Civerolo, and Oliver V. Rattigan. 2016. “Atmospheric Science Research at Whiteface Mountain, NY: Site Description and History.” <em>Aerosol and Air Quality Research</em> 16 (3): 827–40. <a href="https://doi.org/10.4209/aaqr.2015.05.0343" class="uri">https://doi.org/10.4209/aaqr.2015.05.0343</a>.</p>
</div>
<div id="ref-white_nine_2013">
<p>White, Ethan P., Elita Baldridge, Zachary T. Brym, Kenneth J. Locey, Daniel J. McGlinn, and Sarah R. Supp. 2013. “Nine Simple Ways to Make It Easier to (Re)use Your Data.” <em>Ideas in Ecology and Evolution</em> 6 (2). <a href="https://doi.org/10.4033/iee.2013.6b.6.f" class="uri">https://doi.org/10.4033/iee.2013.6b.6.f</a>.</p>
</div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/ASRCsoft/atmoschem.process/">https://​github.com/​ASRCsoft/​atmoschem.process/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/ASRCsoft/atmoschem.process/issues">https://​github.com/​ASRCsoft/​atmoschem.process/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>William May <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-3201-1885" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>
<a href="https://www.nyserda.ny.gov/">NYSERDA</a> <br><small class="roles"> Funder </small>  </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/ASRCsoft/atmoschem.process/actions"><img src="https://github.com/ASRCsoft/atmoschem.process/workflows/R-CMD-check/badge.svg" alt="R build status"></a></li>
<li><a href="https://codecov.io/gh/ASRCsoft/atmoschem.process?branch=master"><img src="https://codecov.io/gh/ASRCsoft/atmoschem.process/branch/master/graph/badge.svg" alt="Codecov test coverage"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by William May, <a href="https://www.nyserda.ny.gov/">NYSERDA</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
